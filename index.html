<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-LLM Token Generator</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* ...existing styles... */

        .text-output {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 20px;
            margin-top: 15px;
            font-family: Georgia, 'Times New Roman', serif;
            font-size: 16px;
            line-height: 1.6;
            color: #333;
            max-height: 600px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        #text-only-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #eee;
        }

        #text-only-section h3 {
            margin-bottom: 10px;
            color: #495057;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>FOCAL LLM Alternating Chat Demo</h1>
        </header>

        <p class="api-note">
            This demo shows multiple LLMs alternately generates response tokens according to your input prompt. Select the models you want to compare, set the tokens per turn and maximum number of turns, then start generation. The selected LLMs will take turns generating short continuations conditioned on the shared context.
        </p>

        <div class="setup-section">
            <div class="card">
                <h2>1. Select Models and API Keys</h2>

                <!-- Category 1: some smaller-sized open-weighted models (no API key needed) -->
                <h3>Category 1: some smaller-sized open-weighted models (no API key needed)</h3>
                <p class="api-note">Using server-side API credentials; currently, no API key input required for these models.</p>
                <div class="models-grid" style="margin-top: 10px;">
                    <!-- Models using server-side Cloudflare credentials -->
                    <div class="model-group">
                        <div class="model-option">
                            <input type="checkbox" id="llama-4-scout" value="@cf/meta/llama-4-scout-17b-16e-instruct" data-provider="cloudflare">
                            <label for="llama-4-scout">Llama 4 Scout 17B</label>
                            <input type="text" id="llama-4-scout-key" placeholder="Server-configured (no key needed)" class="api-key-input" disabled>
                        </div>
                        <div class="model-option">
                            <input type="checkbox" id="llama-3-3-70b" value="@cf/meta/llama-3.3-70b-instruct-fp8-fast" data-provider="cloudflare">
                            <label for="llama-3-3-70b">Llama 3.3 70B Fast</label>
                            <input type="text" id="llama-3-3-70b-key" placeholder="Server-configured (no key needed)" class="api-key-input" disabled>
                        </div>
                        <div class="model-option">
                            <input type="checkbox" id="llama-3-1-8b-fast" value="@cf/meta/llama-3.1-8b-instruct-fast" data-provider="cloudflare">
                            <label for="llama-3-1-8b-fast">Llama 3.1 8B Fast</label>
                            <input type="text" id="llama-3-1-8b-fast-key" placeholder="Server-configured (no key needed)" class="api-key-input" disabled>
                        </div>
                        <div class="model-option">
                            <input type="checkbox" id="llama-3-2-3b" value="@cf/meta/llama-3.2-3b-instruct" data-provider="cloudflare">
                            <label for="llama-3-2-3b">Llama 3.2 3B Instruct</label>
                            <input type="text" id="llama-3-2-3b-key" placeholder="Server-configured (no key needed)" class="api-key-input" disabled>
                        </div>
                        <div class="model-option">
                            <input type="checkbox" id="gemma-3-12b" value="@cf/google/gemma-3-12b-it" data-provider="cloudflare">
                            <label for="gemma-3-12b">Gemma 3 12B</label>
                            <input type="text" id="gemma-3-12b-key" placeholder="Server-configured (no key needed)" class="api-key-input" disabled>
                        </div>
                        <div class="model-option">
                            <input type="checkbox" id="mistral-small" value="@cf/mistral/mistral-7b-instruct-v0.1" data-provider="cloudflare">
                            <label for="mistral-small">Mistral 7B Instruct v0.1</label>
                            <input type="text" id="mistral-small-key" placeholder="Server-configured (no key needed)" class="api-key-input" disabled>
                        </div>
                        <div class="model-option">
                            <input type="checkbox" id="qwq-32b" value="@cf/qwen/qwq-32b" data-provider="cloudflare">
                            <label for="qwq-32b">QwQ 32B</label>
                            <input type="text" id="qwq-32b-key" placeholder="Server-configured (no key needed)" class="api-key-input" disabled>
                        </div>
                    </div>
                </div>

                <!-- Category 2: Providers requiring user API keys -->
                <h3 style="margin-top: 24px;">Category 2: Bring-your-own API keys</h3>
                <p class="api-note">For the providers below, you need to obtain your own API keys. Click the ? icons for where to get them.</p>

                <!-- First Row: OpenAI and Perplexity -->
                <div class="models-grid" style="margin-top: 10px;">
                    <!-- OpenAI Models -->
                    <div class="model-group">
                        <h3>OpenAI
                            <a href="https://platform.openai.com/api-keys" target="_blank" class="api-help" title="Where to get an OpenAI API key">?</a>
                        </h3>
                        <div class="model-option">
                            <input type="checkbox" id="gpt-4o" value="gpt-4o" data-provider="openai">
                            <label for="gpt-4o">GPT-4o</label>
                            <input type="text" id="gpt-4o-key" placeholder="Enter your own OpenAI API Key" class="api-key-input">
                        </div>
                        <div class="model-option">
                            <input type="checkbox" id="gpt-4o-mini" value="gpt-4o-mini" data-provider="openai">
                            <label for="gpt-4o-mini">GPT-4o-mini</label>
                            <input type="text" id="gpt-4o-mini-key" placeholder="Enter your own OpenAI API Key" class="api-key-input">
                        </div>
                        <div class="model-option">
                            <input type="checkbox" id="gpt-3-5-turbo" value="gpt-3.5-turbo" data-provider="openai">
                            <label for="gpt-3-5-turbo">GPT-3.5 Turbo</label>
                            <input type="text" id="gpt-3-5-turbo-key" placeholder="Enter your own OpenAI API Key" class="api-key-input">
                        </div>
                    </div>

                    <!-- Perplexity Models -->
                    <div class="model-group">
                        <h3>Perplexity
                            <a href="https://www.perplexity.ai/settings/api" target="_blank" class="api-help" title="Where to get a Perplexity API key">?</a>
                        </h3>
                        <div class="model-option">
                            <input type="checkbox" id="sonar-pro" value="sonar-pro" data-provider="perplexity">
                            <label for="sonar-pro">Sonar Pro</label>
                            <input type="text" id="sonar-pro-key" placeholder="Enter your own Perplexity API Key" class="api-key-input">
                        </div>
                        <div class="model-option">
                            <input type="checkbox" id="sonar" value="sonar" data-provider="perplexity">
                            <label for="sonar">Sonar</label>
                            <input type="text" id="sonar-key" placeholder="Enter your own Perplexity API Key" class="api-key-input">
                        </div>
                    </div>
                </div>

                <!-- Second Row: DeepSeek and Google -->
                <div class="models-grid" style="margin-top: 20px;">
                    <!-- DeepSeek Models -->
                    <div class="model-group">
                        <h3>DeepSeek
                            <a href="https://platform.deepseek.com/api_keys" target="_blank" class="api-help" title="Where to get a DeepSeek API key">?</a>
                        </h3>
                        <div class="model-option">
                            <input type="checkbox" id="deepseek-chat" value="deepseek-chat" data-provider="deepseek">
                            <label for="deepseek-chat">DeepSeek Chat</label>
                            <input type="text" id="deepseek-chat-key" placeholder="Enter your own DeepSeek API Key" class="api-key-input">
                        </div>
                    </div>

                    <!-- Gemini Models -->
                    <div class="model-group">
                        <h3>Google Gemini
                            <a href="https://aistudio.google.com/app/apikey" target="_blank" class="api-help" title="Where to get a Google Gemini API key">?</a>
                        </h3>
                        <div class="model-option">
                            <input type="checkbox" id="gemini-3-pro" value="gemini-3-pro-preview" data-provider="gemini">
                            <label for="gemini-3-pro">
                                Gemini 3 Pro<span class="param-tooltip" title="Requires higher-tier Gemini API plan to avoid stricter rate limits.">*</span>
                            </label>
                            <input type="text" id="gemini-3-pro-key" placeholder="Enter your own Gemini API Key" class="api-key-input">
                        </div>
                        <div class="model-option">
                            <input type="checkbox" id="gemini-2-5-pro" value="gemini-2.5-pro" data-provider="gemini">
                            <label for="gemini-2-5-pro">
                                Gemini 2.5 Pro<span class="param-tooltip" title="Requires higher-tier Gemini API plan to avoid stricter rate limits.">*</span>
                            </label>
                            <input type="text" id="gemini-2-5-pro-key" placeholder="Enter your own Gemini API Key" class="api-key-input">
                        </div>
                        <div class="model-option">
                            <input type="checkbox" id="gemini-2-5-flash" value="gemini-2.5-flash" data-provider="gemini">
                            <label for="gemini-2-5-flash">Gemini 2.5 Flash</label>
                            <input type="text" id="gemini-2-5-flash-key" placeholder="Enter your own Gemini API Key" class="api-key-input">
                        </div>
                        <div class="model-option">
                            <input type="checkbox" id="gemini-2-5-flash-lite" value="gemini-2.5-flash-lite" data-provider="gemini">
                            <label for="gemini-2-5-flash-lite">Gemini 2.5 Flash-Lite</label>
                            <input type="text" id="gemini-2-5-flash-lite-key" placeholder="Enter your own Gemini API Key" class="api-key-input">
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>2. Configure Parameters</h2>
                <p class="api-note">For stability and cost control, please ensure that (Tokens per Turn) √ó (Max Turns) ‚â§ 5000.</p>
                <div class="param-section">
                    <div class="param-group">
                        <label for="tokens-per-turn">
                            Tokens per Turn<span class="param-tooltip" title="For stability and cost control, please ensure that (Tokens per Turn) √ó (Max Turns) ‚â§ 5000.">*</span>:
                        </label>
                        <input type="number" id="tokens-per-turn" value="5" min="1" max="100">
                    </div>
                    <div class="param-group">
                        <label for="max-turns">
                            Max Turns<span class="param-tooltip" title="For stability and cost control, please ensure that (Tokens per Turn) √ó (Max Turns) ‚â§ 5000.">*</span>:
                        </label>
                        <input type="number" id="max-turns" value="30" min="1" max="100">
                    </div>
                </div>
                <p id="param-error" class="param-error" style="display: none;">
                    (Tokens per Turn) √ó (Max Turns) must be ‚â§ 5000.
                </p>
            </div>

            <div class="card">
                <h2>3. Enter Initial Prompt</h2>
                <textarea id="user-prompt" placeholder="Enter your prompt here..." rows="4"></textarea>
                <div class="button-group">
                    <button id="start-generation" class="primary-btn">üöÄ Start Generation</button>
                    <button id="stop-generation" class="secondary-btn" disabled>‚èπÔ∏è Stop</button>
                    <button id="reset-conversation" class="secondary-btn">üîÑ Reset</button>
                </div>
            </div>
        </div>

        <div class="output-section" id="output-section" style="display: none;">
            <div class="card">
                <h2>üé≠ Generation Results</h2>
                <div class="status-bar">
                    <span id="current-status">Ready</span>
                    <span id="generation-stats"></span>
                </div>
                <div class="conversation-display" id="conversation-display"></div>
            </div>
        </div>

        <!-- Á°Æ‰øùËøô‰∫õÂÖÉÁ¥†Â≠òÂú® -->
        <div id="text-only-section" style="display: none;">
            <h3>Pure Text Output</h3>
            <div id="text-only-display" class="text-output"></div>
        </div>

        <footer class="app-footer">
            <p>
                Have improvement ideas or issues, or want to connect with the developers? Email
                <a href="mailto:jiayuan4@andrew.cmu.edu">jiayuan4@andrew.cmu.edu</a>.
            </p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
